create_project:

  - caseid: 1001
    # 判断是否运行
    run: YES
    # 描述信息：【系统/菜单栏】操作名称
    desc: 【银河/广告/广告计划/广告计划】新增广告计划
    # 前置条件，是否需要依赖其他接口
    precondition:
    #  key 为data中的替换正则时的变量名，value 可以为取全局字典中的key，Global_Val[key]，
    parameterize:
      projectName: projectName
    # 发起请求必备数据
    url: https://galaxy-api-test.shiguangkey.com/api/galaxy/program/info/save
    method: POST
    header:
      token: $<leader>
      content-type: application/x-www-form-urlencoded
    data:
      {
        "channelId": 2,
        "name": $<projectName>",
        "subjectId": 282,
        "subjectName": Python,
        "isTest": 0,
        "gatherType": 1,
        "putMode": 1,
        "allocInstType": 2,
        "channelName": "今日头条",
        "type": 1
      }
    shared: # key1为存入全局字典中的key，value1是使用jsonpath取res中的key，组合存入全局字典中
    check:
      status: 0
      msg: success

query_project:

  - caseid: 1002
    run: YES
    # 描述信息， 尽可能描述清楚点
    desc: 【银河/广告/广告计划/广告计划】查询已新增的广告计划
    # 前置条件，是否需要依赖其他接口
    precondition:
    #  key 为data中的替换正则时的变量名，value 可以为取全局字典中的key，Global_Val[key]，
    parameterize:
      projectName: projectName
    # 发起请求必备数据
    url: https://galaxy-api-test.shiguangkey.com/api/galaxy/program/pageList
    method: POST
    header:
      token: $<leader>
      content-type: application/x-www-form-urlencoded
    data:
      {
        "name": "$<projectName>",
        "isHide": 0,
        "pageIndex": 1,
        "pageSize": 20,
        "type": 1,
        "gatherType": 1
      }
    shared: # key1为存入全局字典中的key，value1是使用jsonpath取res中的key，组合存入全局字典中
      projectId: id
    check:
      status: 0
      msg: success
      data:   # 循环遍历判断params1和params2是否存在于res的data中
        - 今日头条
        - id
        - Python

create_advertising_ideas:

  - caseid: 1003
    run: YES
    desc: 【银河/广告/广告计划/广告创意】创建广告创意
    precondition:
    parameterize:
      projectName: projectName
      ideaName: ideaName
      projectId: projectId
    url: https://galaxy-api-test.shiguangkey.com/api/galaxy/creativity/save
    method: POST
    header:
      token: $<leader>
      content-type: application/x-www-form-urlencoded
    data:
      {
        "name": "$<ideaName>",
        "areaId": 430100,
        "areaName": "长沙市",
        "isNeedCaptch": 0,
        "position": "随机位置",
        "channelId": 2,
        "programName": "$<projectName>",
        "gatherType": 1,
        "putMode": 1,
        "type": 1,
        "programId": $<projectId>
      }
    shared:
    check:
      status: 0
      msg: success

query_advertising_ideas:

  - caseid: 1004
    run: YES
    desc: 【银河/广告/广告计划/广告创意】查询广告创意
    precondition:
    parameterize:
      projectId: projectId
    url: https://galaxy-api-test.shiguangkey.com/api/galaxy/creativity/pageList
    method: POST
    header:
      token: $<leader>
      content-type: application/x-www-form-urlencoded
    data:
      isHide: 0
      pageIndex: 1
      pageSize: 20
      type: 1
      programId: $<projectId>
      gatherType: 1
    shared:
      ideaNo: 'no'    # no读取后会被转义成null，加单引号保证不被转义
      ideaId: id
    check:
      status: 0
      msg: success

create_cafe_course:

  - caseid: 1005
    run: YES
    desc: 【小咖/班课管理/课程管理】创建小咖课程
    precondition:
    parameterize:
      courseName: courseName
      referPrice: referPrice
    url: https://scrm-test.tanzhou.cn/api/edu/course/saveCourse
    method: POST
    header:
      token: $<leader>
      content-type: application/json
    data:
      {
        "data":{
          "cover":"https://tzedu-hd02-xiaoka-oss-bucket01.oss-cn-shanghai.aliyuncs.com/file/edu/course/20200520/18/20200520180745935122860.jpg",
          "subjectId":1,
          "name":"$<courseName>",
          "price":"$<referPrice>",
          "descrption":"小咖描述信息"
        },
        "header":{
          "client":"outframework",
          "clientVersion":"1.0.5"
        }
      }
    shared:
    check:
      status: 0
      msg: "成功"

save_course_type:

  - caseid: 1006
    run: YES
    desc: 【小咖/班课管理/班型管理】创建小咖班型
    precondition:
    parameterize:
      classTypeName: classTypeName
      referPrice: referPrice
      floorPrice: floorPrice
      discountsPrice: discountsPrice
    url: https://scrm-test.tanzhou.cn/api/edu/courseType/saveCourseType
    method: POST
    header:
      token: $<leader>
      content-type: application/json
    data:
      {
        "data":{
          "name":"$<classTypeName>",
          "type":1,
          "intentionId":3,
          "courseList":[
            156
          ],
          "cover":"https://tzedu-hd02-xiaoka-oss-bucket01.oss-cn-shanghai.aliyuncs.com/file/edu/courseType/20200521/09/20200521094314084244384.jpg",
          "description":"描述信息",
          "pcPicList":[

          ],
          "wapPicList":[
            "https://tzedu-hd02-xiaoka-oss-bucket01.oss-cn-shanghai.aliyuncs.com/file/edu/courseType/20200521/09/20200521094327765395345.jpg"
          ],
          "referPrice":"$<referPrice>",
          "discountsPrice":"$<discountsPrice>",
          "floorPrice":"$<floorPrice>"
        },
        "header":{
          "client":"outframework",
          "clientVersion":"1.0.5"
        }
      }
    shared:
    check:
      status: 0
      msg: "成功"

query_class_type:

  - caseid: 1007
    run: YES
    desc: 【小咖/班课管理/班型管理】查询小咖班型
    precondition:
    parameterize:
      classTypeName: classTypeName
    url: https://scrm-test.tanzhou.cn/api/edu/courseType/listCourseTypePage
    method: GET
    header:
      token: $<leader>
    data:
      pageIndex: 1
      pageSize: 10
      name: $<classTypeName>
    shared:
      classTypeId: id
    check:
      status: 0
      msg: "成功"

update_course_type_status:

  - caseid: 1008
    run: YES
    desc: 【小咖/班课管理/班型管理】上架小咖班型
    precondition:
    parameterize:
      classTypeId: classTypeId
    url: https://scrm-test.tanzhou.cn/api/edu/courseType/updateCourseTypeStatus
    method: POST
    header:
      token: $<leader>
      content-type: application/json
    data:
      {
        "data":{
          "id":$<classTypeId>,
          "status":1
        },
        "header":{
          "client":"outframework",
          "clientVersion":"1.0.5"
        }
      }
    shared:
    check:
      status: 0
      msg: "成功"

add_goods:

  - caseid: 1009
    run: YES
    desc: 【媒资/商品管理/新增商品】添加小咖课程商品
    precondition:
    parameterize:
      goodsName: goodsName
      classTypeId: classTypeId
      referPrice: referPrice
      discountsPrice: discountsPrice
    url: https://meizi-api-test.shiguangkey.com/goods/add
    method: POST
    header:
      token: $<leader>
      content-type: application/json
    data:
      {
        "courseFlag":2,
        "goodsName":"$<goodsName>",
        "originalPrice":$<referPrice>,
        "salePrice":$<discountsPrice>,
        "goodsDesc":"描述信息",
        "goodsStatus":1,
        "goodsCover":"https://tzedu-hd02-xiaoka-oss-bucket01.oss-cn-shanghai.aliyuncs.com/file/edu/courseType/20200521/09/20200521094314084244384.jpg",
        "courseId":$<classTypeId>,
        "isSmallClass":"",
        "teachingMethod":""
      }
    shared:
    check:
      code: 0
      msg: success

query_goods:

  - caseid: 1010
    run: YES
    desc: 【媒资/商品管理/新增商品】查询小咖课程商品
    precondition:
    parameterize:
      goodsName: goodsName
    url: https://meizi-api-test.shiguangkey.com/goods/page-list
    method: POST
    header:
      token: $<leader>
      content-type: application/json
    data:
      {
        "goodsName":"$<goodsName>",
        "pageNo":1,
        "pageSize":10,
        "nickName":""
      }
    shared:
      goodsId: id
    check:
      code: 0
      msg: success

create_website:

  - caseid: 1011
    run: YES
    desc: 【媒资/主页/落地页】创建落地页
    precondition:
    parameterize:
      goodsId: goodsId
      goodsName: goodsName
      discountsPrice: discountsPrice
      referPrice: referPrice
    url: https://meizi-api-test.shiguangkey.com/website/create_website
    method: POST
    header:
      token: $<leader>
      content-type: application/json
    data:
      {
        "name":"对内展示标题",
        "goodsId":$<goodsId>,
        "webJsonData":'{"version":"1.15.0","doc":{"bgColor":"","bgImage":"","websiteType":1,"goodsChannel":2,"createVersion":"1.15.0"},"comps":[{"id":"kagg9oheefle6rf","type":19,"width":375,"height":70,"isFixed":true,"goodsName":"$<goodsName>","goodsId":$<goodsId>,"priceText":$<discountsPrice>,"priceOrigin":$<referPrice>,"priceTextColor":"#FF0363","priceTextSize":28,"tipText":"前100名活动限时价","tipTextColor":"#666666","tipTextSize":11,"buttonText":"立即购买","buttonTextColor":"#FFFFFF","buttonTextSize":18,"buttonBg":"#FF0363","isOneKey":false,"y":0}],"afterPayComps":[{"id":"kaggariaqgxyzrn","type":3,"width":375,"height":115,"required":true,"value":"","title":"手机 (已加密)","placeholder":"请输入手机号码","unique":true,"validate":false,"layout":1,"phoneCodeType":0,"codeTextColor":"#FFFFFF","codeTextSize":15,"codeBgColor":"#1855FB","isAbroad":false,"y":0},{"id":"kaggauvbnh2iv7c","type":6,"width":339,"height":77,"text":"提交","textColor":"#FFFFFF","textSize":17,"borderColor":"#1855FB","borderWidth":2,"borderRadius":4,"bgColor":"#1855FB","position":false,"positionBtnBgColor":"#1855FB","isBuy":false,"y":115}],"afterSubmitComps":[{"id":"kaggauvb8eva4yq","type":20,"width":375,"img":"https://prod-qiniu-media.shiguangkey.com/FhUCXVlZjjAzQghQxr1bHT9pa3yz","height":220,"title":"提交成功","desc":"我们已收到您的反馈，感谢填写","isDownloadApp":false,"y":0}]}',
        "previewUrl":"https://test-huawei-media.shiguangkey.com/kaggc15mu7qimtb",
        "isRecommendApp":false,
        "submitType":2,
        "isSmsVerify":0,
        "websiteType":1,
        "adCreateType":1
      }
    shared:
      websiteId: id
    check:
      code: 0
      msg: success

publish_website:

  - caseid: 1012
    run: YES
    desc: 【媒资/主页/落地页】发布落地页
    precondition:
    parameterize:
      websiteId: websiteId
    url: https://meizi-api-test.shiguangkey.com/website/publish_website
    method: POST
    header:
      token: $<leader>
      content-type: application/json
    data:
      {
        "websiteId":$<websiteId>
      }
    shared:
    check:
      code: 0
      msg: 落地页发布成功

association_creativity:

  - caseid: 1013
    run: YES
    desc: 【媒资/主页/落地页】生成链接
    precondition:
    parameterize:
      projectName: projectName
      websiteId: websiteId
      ideaNo: ideaNo
      ideaId: ideaId
    url: https://meizi-api-test.shiguangkey.com/website/association_creativity
    method: POST
    header:
      token: $<leader>
      content-type: application/json
    data:
      {
        "websiteId":$<websiteId>,
        "title":"随机展示标题",
        "releaseChannel":0,
        "putPlanNames":[
          "随机广告计划名称"
        ],
        "adType":1,
        "adPlan":"$<projectName>",
        "channel":"其它",
        "channelId":29,
        "subject":"Python",
        "subjectId":282,
        "baseReqs":[
        {
          "adCreativity":"$<projectName>",
          "adNo":"$<ideaNo>",
          "creativityId":$<ideaId>
        }
        ],
        "accountId":"",
        "otherReleaseChannel":"随机渠道"
      }
    shared:
      putPlanName: putPlanName
      creativityCode: creativityCode
    check:
      code: 0
      msg: success

login_operation:

  - caseid: 1014
    run: YES
    desc: 【运营系统】登录运营后台
    precondition:
    parameterize:
    url: https://admin-test.shiguangkey.com/sys/login
    method: POST
    header:
      cookie: $<cookie>
      content-type: application/x-www-form-urlencoded
    data:
      username: admin
      password: admin1024
      captcha: operation-case
    shared:
    check:
      code: 0

get_register_code:

  - caseid: 1015
    run: YES
    desc: 【运营系统】获取注册验证码
    precondition:
    parameterize:
      phoneNumber: phoneNumber
      timestamp: timestamp
    url: https://admin-test.shiguangkey.com/user/set-smscode
    method: GET
    header:
      cookie: $<cookie>
    data:
      phone: $<phoneNumber>
      _: $<timestamp>
    shared:
      smsCode: smsCode
    check:
      status: 0
      msg: success

get_user_info:

  - caseid: 1016
    run: YES
    desc: 【教务】获取当前登录用户信息
    precondition:
    parameterize:
    url: https://organization-test.shiguangkey.com/api/organization/login/getUserInfo
    method: POST
    header:
      content-type: application/json
      token: $<leader>
    data:
    shared:
      departmentName: deptName
      # 注意此处因关联后面接口的organId
      organizationId:  deptId
      leaderName: nick
      leaderUid: uid
      departmentIdChain: deptIdChain
      tanzkAccount: tanzkAccount
    check:
      status: 0
      msg: success

register_classroom:

  - caseid: 1017
    run: YES
    desc: 【电商平台】注册成为学员
    precondition: get_register_code
    parameterize:
      phoneNumber: phoneNumber
      smsCode: smsCode
    url: https://open-test.shiguangkey.com/api/udb/login/phone/register
    method: POST
    header:
      content-type: application/x-www-form-urlencoded
      terminaltype: "4"
    data:
      phone: $<phoneNumber>
      code: $<smsCode>
      password: ISGMyneATSuhkiwz4BURBQ
    shared:
      student: token
      studentUid: uid
    check:
      status: 0
      msg: success

get_account:

  - caseid: 1018
    run: YES
    desc: 【电商平台】获取学员的账号字段
    precondition:
    parameterize:
    url: https://open-test.shiguangkey.com/api/udb/user/mine
    method: GET
    header:
      token: $<student>
      terminaltype: "4"
    data:
    shared:
      # 此处提取字段可在10017接口进行提取
      account: account
      studentNickname: nickname
    check:
      status: 0
      msg: success

query_vip_student:

  - caseid: 1019
    run: YES
    desc: 【教务/VIP课程管理/管理】查询VIP学员课程权限
    precondition: register_classroom
    parameterize:
      classTypeId: classTypeId
      phoneNumber: phoneNumber
      leader: leader
    url: https://www-test.shiguangkey.com/api/class/listVipClassStudents
    method: POST
    header:
      content-type: application/x-www-form-urlencoded
    data:
      courseId: $<classTypeId>
      pageIndex: 1
      pageSize: 10
      userParamValue: $<phoneNumber>
      userParamType: 1
      terminalType: 4
      token: $<leader>
    shared:
    check:
      status: 0
      msg: success

query_record:

  - caseid: 1020
    run: YES
    desc: 【银河/流量/入库记录查询】查询流量入库记录
    precondition: register_classroom
    parameterize:
      phoneNumber: phoneNumber
    url: https://galaxy-api-test.shiguangkey.com/api/galaxy/customerLeaningRepeat/list
    method: POST
    header:
      content-type: application/x-www-form-urlencoded
      token: $<leader>
    data:
      mobile: $<phoneNumber>
#      gatherTimeStart: 1589904000000 # 起始时间和截止时间
#      gatherTimeEnd: 1589990399999
      pageIndex: 1
      pageSize: 20
      isAdult: 1
    shared:
      allocId: id
      customerId: customerId
      customerLeaningId: customerLeaningId
    check:
      status: 0
      msg: success

alloc_to_dept:

  - caseid: 1021
    run: YES
    desc: 【银河/流量/入库记录查询】入库流量批量分配
    precondition:
    parameterize:
      departmentIdChain: departmentIdChain
      allocId: allocId
    url: https://galaxy-api-test.shiguangkey.com/api/galaxy/customer/pay/adult/allocToDept
    method: POST
    header:
      token: $<leader>
      content-type: application/x-www-form-urlencoded
      terminaltype: "4"
    data:
      deptIdChain: $<departmentIdChain>
      customerLeaningRepeatIds: $<allocId>
    shared:
    check:
      status: 0
      msg: success

query_oceanpower:

  - caseid: 1022
    run: YES
    desc: 【海川/流量管理/院海流量】查询分配记录
    precondition:
    parameterize:
      phoneNumber: phoneNumber
      organizationId: organizationId
    url: https://galaxy-api-test.shiguangkey.com/api/galaxy/instAllocRecord/instList
    method: POST
    header:
      content-type: application/x-www-form-urlencoded
      token: $<leader>
    data:
      isAdult: 1
      pageIndex: 1
      pageSize: 20
      mobile: $<phoneNumber>
    shared:
      fllowId: id
    check:
      status: 0
      msg: success

query_deptEmployee:

  - caseid: 1023
    run: YES
    desc: 【海川/流量管理/院海流量】点击分配流量
    precondition:
    parameterize:
      organizationId: organizationId
    url: https://ocean-test.shiguangkey.com/main/stCollegeSea/deptEmployeeList
    method: GET
    header:
      token: $<leader>
    data:
      organizationId: $<organizationId>
    shared:
    check:
      data:
        - employeeFollowDetails
        - followerId

allocate_section:

  - caseid: 1024
    run: YES
    desc: 【海川/流量管理/院海流量】分配流量
    precondition:
    parameterize:
      leaderUid: leaderUid
      fllowId: fllowId
      organizationId: organizationId
    url: https://ocean-test.shiguangkey.com/main/stCollegeSea/allocateSection?organizationId=4531
    method: POST
    header:
      token: $<leader>
      content-type: application/json
    data:
      {
        "allocType":1,
        "allocAgain":0,
        "allocateDetail":[
        {
          "followNum":1,
          "followerId":$<leaderUid>
        }
        ],
        "ids":[
          $<fllowId>
        ],
        "organizationId":$<organizationId>
      }
    shared:
    check:
      msg: null

query_my_traffic:

  - caseid: 1025
    run: YES
    desc: 【海川/流量管理/我的流量】查询我的流量
    precondition:
    parameterize:
      phoneNumber: phoneNumber
      organizationId: organizationId
    url: https://ocean-test.shiguangkey.com/main/stuser/StUserPage
    method: POST
    header:
      token: $<leader>
      content-type: application/json
    data:
      {
        "status":"new",
        "pageSize":20,
        "pageNow":1,
        "likeParam":"$<phoneNumber>",
        "likeParamType":1,
        "isNew":1,
        "organizationId":$<organizationId>
      }
    shared:
      stId: stId
    check:
      msg: null
      data:
        - followerName
        - remarks
        - stId

get_student_info:

  - caseid: 1026
    run: YES
    desc: 【海川/流量管理/我的流量】获取学员详细信息
    precondition:
    parameterize:
      stId: stId
      organizationId: organizationId
    url: https://ocean-test.shiguangkey.com/main/stuser/getStUser
    method: GET
    header:
      token: $<leader>
    data:
      stId: $<stId>
      organizationId: $<organizationId>
    shared:
    check:
      msg: null
      data:
        - courseName
        - adLandingPage

update_st_user_status:

  - caseid: 1027
    run: YES
    desc: 【海川/流量管理/我的流量】跟进并关闭
    precondition:
    parameterize:
      stId: stId
      organizationId: organizationId
    url: https://ocean-test.shiguangkey.com/main/stuser/updateStUserStatus?organizationId=4531
    method: POST
    header:
      token: $<leader>
      content-type: application/json
    data:
      {
        "stId":$<stId>,
        "intention":4,
        "followStatus":2,
        "operatorInfo":"强意向，未沟通→已加好友",
        "learnIntention":"",
        "followType":1,
        "followStage":"未沟通→已加好友",
        "isInvalid":0,
        "followMarks":"跟进",
        "organizationId":$<organizationId>
      }
    shared:
    check:
      msg: null

submit_course:

  - caseid: 1028
    run: YES
    desc: 【教务/VIP课程管理/管理课程】发布课程
    precondition:
    parameterize:
      title: title
      leader: leader
      referPrice: referPrice
      timestamp: timestamp
      floorPrice: floorPrice
      discountsPrice: discountsPrice
      organizationId: organizationId
    url: https://www-test.shiguangkey.com/api/course/submitCourse
    method: POST
    header:
      content-type: application/x-www-form-urlencoded
    data:
      cateIdFk: 282
      title: $<title>
      coverVideo:
      marketPhone:
      qqNum:
      marketWechat:
      descrption: python测试课程简介
      cover: file/202005/25/20200525175818284516403.png
      qqGroups:
      courseContent: <p>测试课程详情</p>
      learningGoal: 测试目标
      suitableCrowds: 测试人群
      difficultyLevel: 1
      courseLabel: python
      courseServicePromise:
      visibility: 5510
      originalPrice: $<referPrice>
      syllabusId:
      relationPhone: 0
      courseDepartmentId: $<organizationId>
      afterSaleDepartmentalChainId: 1001-2001
      afterDeptId: 2001
      afterDeptName: VIP教学服务中心
      ratioStrategySales: 0.1
      vipRatioAfterSales: 0.05
      effectiveTime: $<timestamp>
      ratioAfterSales: 0.15
      divideType: 5
      syllabusJson: '[{"nodeName":"testsection1","order":1,"nodeType":2}]'
      typeDicFk: 5310
      floorPrice: $<floorPrice>
      price: $<discountsPrice>
      learnDuration: 60
      terminalType: 4
      token: $<leader>
    shared:
    check:
      status: 0
      msg: success

query_verify_course:

  - caseid: 1029
    run: YES
    desc: 【旧运营系统/运营管理/课程审核】查询待审核课程
    precondition:
    parameterize:
      title: title
      leaderUid: leaderUid
    url: https://admin-test-new.shiguangkey.com/api/course/verifyList
    method: GET
    header:
      token: $<leader>
    data:
      courseTitle: $<title>
      checkStatus: 1511
      orgId: ""
      reviewId: $<leaderUid>
      pageSize: 10
      pageIndex: 1
    shared:
      courseDrftsId: id
    check:
      code: 0
      msg: OK

verify_course_detail:

  - caseid: 1030
    run: YES
    desc: 【旧运营系统/运营管理/课程审核】查看待审核课程详情
    precondition:
    parameterize:
      courseDrftsId: courseDrftsId
    url: https://admin-test-new.shiguangkey.com/api/course/verifyDraft
    method: GET
    header:
      token: $<leader>
    data:
      draftsId: $<courseDrftsId>
    shared:
    check:
      code: 0
      msg: OK

verify_course:

  - caseid: 1031
    run: YES
    desc: 【旧运营系统/运营管理/课程审核】 审核课程
    precondition:
    parameterize:
      courseDrftsId: courseDrftsId
      tanzkAccount: tanzkAccount
    url: https://admin-test-new.shiguangkey.com/api/course/verifyCourse
    method: GET
    header:
      x-csrf-token: jTyDkp2rKh49ZkfPLLD6avU1
      token: $<leader>
    data:
      courseDrftsId: $<courseDrftsId>
      checkStatus: 1512
      checkDesc: 审核通过
      operator: $<tanzkAccount>
    shared:
    check:
      code: 0
      msg: OK

query_by_teacher_forweb:

  - caseid: 1032
    run: YES
    desc: 【教务/VIP课程管理/管理课程】查询已审核课程 获取courseId
    precondition:
    parameterize:
      title: title
      leader: leader
    url: https://www-test.shiguangkey.com/api/course/queryByTeacherForWeb
    method: GET
    header:
    data:
      status: 2
      courseSource: ""
      attrtag: ""
      key: $<title>
      pageIndex: 1
      pageSize: 10
      courseType: 5310
      terminalType: "4"
      token: $<leader>
    shared:
      courseId: id
    check:
      status: 0
      msg: success

edit_need_enrol:

  - caseid: 1033
    run: YES
    desc: 【教务/VIP课程管理/管理课程】设置需要入学接待
    precondition:
    parameterize:
      courseId: courseId
    url: https://www-test.shiguangkey.com/api/courses/editNeedEnrol
    method: POST
    header:
      content-type: application/json
      token: $<leader>
    data:
      courseId: $<courseId>
      needEnrol: 1
    shared:
    check:
      status: 0
      msg: success

get_course_name:

  - caseid: 1034
    run: YES
    desc: 【教务/VIP课程管理/班期管理】查询要新增班期的课程
    precondition:
    parameterize:
      courseId: courseId
    url: https://www-test.shiguangkey.com/api/syllabus/getLatestSyllabusByCourseId
    method: GET
    header:
      terminaltype: "4"
      token: $<leader>
    data:
      courseId: $<courseId>
    shared:
      syllabusId: syllabusId
      syllabusDetailId: syllabusDetailId
    check:
      status: 0
      msg: success

add_class:

  - caseid: 1035
    run: YES
    desc: 【教务/VIP课程管理/班期管理】添加班期
    precondition:
    parameterize:
      leader: leader
      tomorrow: tomorrow
      courseId: courseId
      syllabusId: syllabusId
      syllabusDetailId: syllabusDetailId
    url: https://www-test.shiguangkey.com/api/teacher/class/addClass
    method: POST
    header:
      content-type: application/x-www-form-urlencoded
    data:
      courseId: $<courseId>
      chapterJson: '[{"title":"testsection1","chapterType":0,"startDateStr":"$<tomorrow>","startTimeStr":"20:00","endTimeStr":"22:00","canUpdate":true,"index":1,"DisTitleType":true,"DischapterType":true,"disabled":true,"syllabusDetailId":$<syllabusDetailId>,"syllabusDetailParentId":0,"syllabusDetailParentName":""}]'
      courseTeacherJson: '[{"userIdFk":"19304749","roleDicFk":"5701"},{"userIdFk":"19304744","roleDicFk":"5702"},{"userIdFk":"19304750","roleDicFk":"5703"},{"userIdFk":"19304741","roleDicFk":"5704"}]'
      syllabusId: $<syllabusId>
      terminalType: 4
      token: $<leader>
    shared:
    check:
      status: 0
      msg: success

add_worksheet:

  - caseid: 1036
    run: YES
    desc: 【CRM/工单管理/工单列表】首次提交工单
    precondition:
    parameterize:
      courseId: courseId
      account: account
      discountsPrice: discountsPrice
      departmentIdChain: departmentIdChain
      transNo: transNo
      timestamp: timestamp
      userName: userName
      phoneNumber: phoneNumber
      qq: qq
      leaderUid: leaderUid
    url: https://work-test.shiguangkey.com/api/worksheet/worksheet/save
    method: POST
    header:
      content-type: application/x-www-form-urlencoded
      token: $<leader>
    data:
      isLackOfAccount: "0"
      tanzkAccount: $<account>
      isKoubei: 0
      buyType: 1
      courseType: 6810
      buyCourseDetails: '[{"courseId":$<courseId>,"sellingPrice":$<discountsPrice>}]'
      payTypeValue: 1
      rcvChannelValue: 1
      rcvChannelValueSub: 34
      rcvAccount: tanzhouedu@mooncollege.cn
      transNo: $<transNo>
      payTime: $<timestamp>
      belongDeptIdChain: $<departmentIdChain>
      belongDeptServiceRatio: 0.33
      loanSubsidizedAmount: 0
      loanDepositAmount: 0
      currencyValue: 1
      shouldPayAmount: $<discountsPrice>
      paidAmount: $<discountsPrice>
      vouchers: https://res.shiguangkey.com/file/worksheet/payProof/20200408/15/20200408153408271523387.jpg
      divideDeptDetails: '[{"followerUid":$<leaderUid>,"deptIdChain":"$<departmentIdChain>","divideAmount":$<discountsPrice>}]'
      totalPriceSelling: $<discountsPrice>
      isSuspend: 0
      useCoupon: 0
      vipLiveState: 1
      name: $<userName>
      mobile: $<phoneNumber>
      qq: $<qq>
      followerUid: $<leaderUid>
    shared:
    check:
      status: 0
      msg: success

query_workshhet:

  - caseid: 1037
    run: YES
    desc: 【CRM/财务管理/财务列表】查询工单
    precondition:
    parameterize:
      qq: qq
    url: https://work-test.shiguangkey.com/api/worksheet/worksheet/pageList
    method: POST
    header:
      content-type: application/x-www-form-urlencoded
      token: $<leader>
    data:
      pageIndex: 1
      pageSize: 1
      state: 91
      qq: $<qq>
    shared:
      worksheetId: id
      worksheetNo: worksheetNo
      orderNo: orderNo
      orderId: orderId
    check:
      status: 0
      msg: success

check_worksheet:

  - caseid: 1038
    run: YES
    desc: 【CRM/财务管理/财务列表】财务审核工单
    precondition:
    parameterize:
      worksheetId: worksheetId
    url: https://work-test.shiguangkey.com/api/worksheet/finance/audit/pass
    method: POST
    header:
      content-type: application/x-www-form-urlencoded
      token: $<leader>
    data:
      id: $<worksheetId>
    shared:
    check:
      status: 0
      msg: success

query_student_entrance:

  - caseid: 1039
    run: YES
    desc: 【教务/入学管理/入学接待】查询入学列表指定学员
    precondition:
    parameterize:
      account: account
      setTime: setTime
    url: https://open-test.shiguangkey.com/api/afterSales/enrolQueue/query
    method: GET
    header:
      token: $<leader>
    data:
      pageIndex: 1
      pageSize: 10
      courseType: 0
      account: $<account>
      status: 0
      setTime: "$<setTime>"
    shared:
    check:
      status: 0
      msg: success

query_status:

  - caseid: 1040
    run: YES
    desc: 【教务/入学管理/入学接待】查询学员信息状态
    precondition:
    parameterize:
      orderId: orderId
    url: https://open-test.shiguangkey.com/api/afterSales/enrolQueue/status/query
    method: GET
    header:
      token: $<leader>
    data:
      orderIds: $<orderId>
    shared:
    check:
      status: 0
      msg: success

handled_order:

  - caseid: 1041
    run: YES
    desc: 【教务/入学管理/入学接待】入学状态修改
    precondition:
    parameterize:
      orderId: orderId
    url: https://open-test.shiguangkey.com/api/afterSales/enrol/order/handled
    method: POST
    header:
      content-type: application/json
      token: $<leader>
    data:
      {
        "orderId":$<orderId>,
        "status":2
      }
    shared:
    check:
      status: 0
      msg: success

make_online_contract:

  - caseid: 1042
    run: YES
    desc: 【教务/入学管理/入学接待】预览合同
    precondition:
    parameterize:
      account: account
      title: title
      courseId: courseId
      userName: userName
      orderId: orderId
      orderNo: orderNo
      worksheetId: worksheetId
      studentUid: studentUid
      discountsPrice: discountsPrice
      studentNickname: studentNickname
    url: https://open-test.shiguangkey.com/api/afterSales/contract/makeOnlineContract
    method: POST
    header:
      content-type: application/json
      token: $<leader>
    data:
      {
        "contractType":1,
        "contractTitle":"测试合同007",
        "courses":[
        {
          "courseId":$<courseId>,
          "courseTitle":"$<title>"
        }
        ],
        "buyCourseListenDays":20,
        "courseContent":"测试内容007",
        "contractPresents":[],
        "postFlag":0,
        "remarks":[""],
        "userName":"$<userName>",
        "userAccount":"$<account>",
        "orderId":$<orderId>,
        "orderNo":"$<orderNo>",
        "operateType":1,
        "payDetails":[
        {
          "payType":1,
          "totalAmount":$<discountsPrice>
        }
        ],
        "payTypes":[1],
        "worksheetInfos":[
        {
          "worksheetId":$<worksheetId>
        }
        ],
        "packageCourses":[],
        "duration":17219,
        "studentUid":$<studentUid>
      }
    shared:
      contractId: id
    check:
      status: 0
      msg: success

get_contract:

  - caseid: 1043
    run: YES
    desc: 【教务/入学管理/入学接待】获取合同
    precondition:
    parameterize:
      contractId: contractId
    url: https://open-test.shiguangkey.com/api/afterSales/contract/getContract
    method: GET
    header:
      token: $<leader>
    data:
      id: $<contractId>
    shared:
      modifyTime: modifyTime
    check:
      status: 0
      msg: success
      data:
        - modifyTime

send_contract:

  - caseid: 1044
    run: YES
    desc: 【教务/入学管理/入学接待】复制链接发送合同
    precondition:
    parameterize:
      contractId: contractId
    url: https://www-test.shiguangkey.com/api/teacher/contract/send
    method: POST
    header:
      token: $<leader>
      content-type: application/json
    data:
      id: $<contractId>
    shared:
    check:
      status: 0
      msg: success

get_user_course_access:

  - caseid: 1045
    run: YES
    desc: 【教务/入学管理/入学接待】获取用户课程权限，获取classId
    precondition:
    parameterize:
      orderId: orderId
      studentUid: studentUid
    url: https://open-test.shiguangkey.com/api/afterSales/enrolQueue/getUserCourseAccess
    method: GET
    header:
      token: $<leader>
    data:
      orderId: $<orderId>
      userId: $<studentUid>
    shared:
      classId: classId
    check:
      status: 0
      msg: success
      data:
        - classId

save_course_access:

  - caseid: 1046
    run: YES
    desc: 【教务/入学管理/入学接待】点击完成入学接待
    precondition:
    parameterize:
      orderId: orderId
      studentUid: studentUid
      courseId: courseId
      classId: classId
    url: https://open-test.shiguangkey.com/api/afterSales/permission/saveCourseAccess
    method: POST
    header:
      token: $<leader>
      content-type: application/json
    data:
      {
        "orderId":$<orderId>,
        "list":[
        {
          "userId":$<studentUid>,
          "courseId":$<courseId>,
          "classId":$<classId>,
          "currentClassId":0
        }
        ]
      }
    shared:
    check:
      status: 0
      msg: success

student_permission:

  - caseid: 1047
    run: YES
    desc: 【教务/入学管理/入学接待】学员权限
    precondition:
    parameterize:
      orderId: orderId
      studentUid: studentUid
      classId: classId
      courseId: courseId
    url: https://open-test.shiguangkey.com/api/afterSales/enrolQueue/studentPermission
    method: POST
    header:
      token: $<leader>
      content-type: application/json
    data:
      {
        "orderId":$<orderId>,
        "list":[
        {
          "userId":$<studentUid>,
          "courseId":$<courseId>,
          "classId":$<classId>,
          "currentClassId":0
        }
        ]
      }
    shared:
    check:
      status: 0
      msg: success

update_student_permission:

  - caseid: 1048
    run: YES
    desc: 【教务/入学管理/入学接待】更新学员权限
    precondition:
    parameterize:
      worksheetId: worksheetId
      orderId: orderId
    url: https://open-test.shiguangkey.com/api/afterSales/permissionAnomaly/update
    method: POST
    header:
      token: $<leader>
      content-type: application/json
    data:
      {
        "worksheetIds":[
          $<worksheetId>
        ],
        "orderId":$<orderId>
      }
    shared:
    check:
      status: 0
      msg: success

send_sms:

  - caseid: 1049
    run: NO
    desc: 【教务/入学管理/入学接待】完成后发送短信
    precondition:
    parameterize:
      studentUid: studentUid
    url: https://open-test.shiguangkey.com/api/afterSales/enrolQueue/sendSms
    method: GET
    header:
      token: $<leader>
    data:
      # 关联添加班期里的ID
      teacherId: "19304741"
      teacherContact: "346770816"
      type: 1
      stuId: $<studentUid>
    shared:
    check:
      status: 0
      msg: success

get_contracts:

  - caseid: 1050
    run: YES
    desc: 【潭州课堂/我和合同】点击签订合同，获取合同
    precondition:
    parameterize:
      contractId: contractId
    url: https://open-test.shiguangkey.com/api/afterSales/contract/getContract
    method: GET
    header:
      token: $<leader>
    data:
      id: $<contractId>
    shared:
      modifyTime: modifyTime
    check:
      status: 0
      msg: success
      data:
        - modifyTime

signing_contract:

  - caseid: 1051
    run: YES
    desc: 【潭州课堂/我的合同】签订合同
    precondition:
    parameterize:
      userName: userName
      timestamp: timestamp
      qq: qq
      contractId: contractId
      modifyTime: modifyTime
    url: https://www-test.shiguangkey.com/api/student/contract/signingContract
    method: POST
    header:
      token: $<leader>
      content-type: application/json
    data:
      {
        "signingName":"LOUIE",
        "userName":"LOUIE",
        "userQq":"$<qq>",
        "idCard":"320105198304162139",
        "contactPhone":"13347335633",
        "modifyTime":$<modifyTime>,
        "contractId":$<contractId>
      }
    shared:
    check:
      status: 0
      msg: success

add_after_sales_application_form:

  - caseid: 1052
    run: YES
    desc: 【潭州课堂/我的订单】申请售后服务
    precondition:
    parameterize:
      orderId: orderId
      userName: userName
    url: https://open-test.shiguangkey.com/api/afterSales/complaintRefund/app/addAfterSalesApplicationForm
    method: POST
    header:
      token: $<student>
      content-type: application/json
    data:
      {
        "orderId":"$<orderId>",
        "sourceType":2,
        "userName":"$<userName>",
        "voucherUrl":"file/202005/27/20200527170819302610163.jpg",
        "contactContent":"13347335633",
        "complaintContent":"test content",
        "contactInformation":4,
        "studentReasonType":"2,3,4"
      }
    shared:
      complaintTaskId: complaintTaskId
    check:
      status: 0
      msg: success

qry_dealing_complaints:

  - caseid: 1053
    run: YES
    desc: 【教务/投诉退款/处理】查询待处理异动单
    precondition:
    parameterize:
      account: account
    url: https://open-test.shiguangkey.com/api/afterSales/complaintRefund/inDeal/qryDealingComplaints
    method: POST
    header:
      token: $<leader>
      content-type: application/json
    data:
      {
        "pageIndex": 1,
        "pageSize": 10,
        "queryDealingStatus": "1",
        "hideFooter": "1",
        "hideHeader": "1",
        "hideMenu": "1",
        "system": "taoli",
        "dealDistributeIdType": "1",
        "creatorIdType": "1",
        "userInfoType": "2",
        "userInfoContent": "$<account>"
      }
    shared:
      signUpTime: signUpTime
      complaintTime: complaintTime
      complaintTaskNo: complaintTaskNo
    check:
      status: 0
      msg: success

save_deal_detail:

  - caseid: 1054
    run: YES
    desc: 【教务/投诉退款/处理】处理订单
    precondition:
    parameterize:
      title: title
      orderId: orderId
      orderNo: orderNo
      account: account
      classId: classId
      userName: userName
      courseId: courseId
      timestamp: timestamp
      studentUid: studentUid
      leaderUid: leaderUid
      leaderName: leaderName
      organizationId: organizationId
      signUpTime: signUpTime
      complaintTime: complaintTime
      complaintTaskId: complaintTaskId
      complaintTaskNo: complaintTaskNo
      discountsPrice: discountsPrice
      departmentName: departmentName
      studentNickname: studentNickname
      departmentIdChain: departmentIdChain
    url: https://open-test.shiguangkey.com/api/afterSales/complaintRefund/inDeal/saveDealDetail
    method: POST
    header:
      token: $<leader>
      content-type: application/json
    data:
      {
        "userInfoType":"4",
        "complaintReasonType0":{
          "dictCode":15,
          "dictName":"课程原因",
          "subDictCode":1501,
          "subDictName":"课外话题太多",
          "subLabel":2
        },
        "complaintType":"1",
        "userName":"LOUIE",
        "complaintChannel":"11",
        "dealStatus":"1",
        "followContent":"啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊",
        "resolvePlanRemark":"啊啊啊啊啊啊啊啊啊啊",
        "complaintReasonList":[
        {
          "complaintReasonType":15,
          "complaintReasonSubdivide":1501,
          "complaintReasonLable":2
        }
        ],
        "followContentPicUrl":"file/15905808696062e2d87b5a9a68.jpg",
        "orderId":$<orderId>,
        "initValue":{
          "complaintTaskId":$<complaintTaskId>,
          "complaintTaskNo":"$<complaintTaskNo>",
          "userId":$<studentUid>,
          "orderId":$<orderId>,
          "orderNo":"$<orderNo>",
          "orderInfo":{
            "orderId":$<orderId>,
            "goodsMoney":$<discountsPrice>,
            "payableMoney":$<discountsPrice>,
            "unpaidMoney":0
          },
          "userAccount":"$<account>",
          "userName":"$<userName>",
          "userWechatNick":"$<studentNickname>",
          "userWechat":"",
          "userPhone":"13347335633",
          "userQq":null,
          "complaintType":1,
          "complaintChannel":11,
          "complaintContent":"test content",
          "complaintContentEvidenceUrl":[
            "file/202005/27/20200527170819302610163.jpg"
          ],
          "complaintTime":$<complaintTime>,
          "studentStable":0,
          "bizCateId":74,
          "goodsType":6810,
          "goodsId":$<courseId>,
          "goodsName":"$<title>",
          "signUpTime":$<signUpTime>,
          "classId":$<classId>,
          "classPeriod":1,
          "headmasterId":19304741,
          "headmasterNick":"老师专属--7156",
          "mainTeacherId":19304750,
          "mainTeacherNick":"老师专属--5083",
          "saleInfos":[
          {
            "saleId":$leaderUid<>,
            "saleNick":"$<leaderName>",
            "complaintTaskId":null
          }
          ],
          "saleDepts":[
          {
            "saleDeptId":$<organizationId>,
            "saleDeptName":"$<departmentName>",
            "deptLinkId":"$<departmentIdChain>",
            "deptLinkName":"$<departmentName>",
            "saleDeptType":1
          }
          ],
          "distributeType":0,
          "distributeId":$<$leaderUid>,
          "taskDealStatus":2,
          "dealResultType":0,
          "userInfoType":4,
          "userInfoContent":"13347335633",
          "followContent":"",
          "followContentPicUrl":[

          ],
          "lastDealStatus":null,
          "complaintReasonRemark":"",
          "complaintChannelUpdateHis":"11",
          "dealStatus":0,
          "resultType":0,
          "resultRemark":"",
          "leaveStartTime":0,
          "leaveEntTime":0,
          "complaintReasonType":0,
          "complaintReasonSubdivide":0,
          "complaintReasonLable":0,
          "studentMessages":[

          ],
          "studentReasonTypeName":"服务原因/个人原因/经济原因",
          "orgStubId":1001
        },
        "goodsMoney":$<discountsPrice>,
        "payableMoney":$<discountsPrice>,
        "unpaidMoney":0,
        "goodsId":$<courseId>,
        "goodsName":"$<title>",
        "goodsType":6810,
        "orderNO":"$<orderNO>",
        "classId":$<classId>,
        "classPeriod":1,
        "courseName":"$<title>",
        "headmasterId":19304741,
        "headmasterNick":"老师专属--7156",
        "mainTeacherId":19304750,
        "mainTeacherNick":"老师专属--5083",
        "saleInfos":[
        {
          "saleId":$<leaderUid>,
          "saleNick":"$<leaderName>",
          "complaintTaskId":null
        }
        ],
        "saleDepts":[
        {
          "saleDeptId":$<organizationId>,
          "saleDeptName":"$<departmentName>",
          "deptLinkId":"$<departmentIdChain>",
          "deptLinkName":"潭州教育>哆啦A梦测试专属>动漫院",
          "saleDeptType":1
        }
        ],
        "resultType":"1",
        "complaintTaskId":$<complaintTaskId>,
        "userId":$<studentUid>,
        "complaintReasonSubdivide":0,
        "complaintReasonLable":0,
        "complaintReasonType":0
      }
    shared:
    check:
      status: 0
      msg: success

qry_sallers_approve_list:

  - caseid: 1055
    run: YES
    desc: 【教务/投诉退款/审核】查询待售前售后审核审核单
    precondition:
    parameterize:
      account: account
    url: https://open-test.shiguangkey.com/api/afterSales/complaintRefund/applyManager/qrySallersApproveList
    method: POST
    header:
      token: $<leader>
      content-type: application/json
    data:
      {
        "pageIndex": 1,
        "pageSize": 10,
        "hideFooter": "1",
        "hideHeader": "1",
        "hideMenu": "1",
        "system": "taoli",
        "userInfoType": "2",
        "userInfoContent": "$<account>",
        "dealTaskUserIdType": "1",
        "queryDealTimeType": "1",
        "approveUntreatedUserIdType": "1"
      }
    shared:
      flowMainId: flowMainId
    check:
      status: 0
      msg: success

save_saller_approve_result:

  - caseid: 1056
    run: YES
    desc: 【教务/投诉退款/审核】待售前售后审核
    precondition:
    parameterize:
      complaintTaskId: complaintTaskId
      flowMainId: flowMainId
    url: https://open-test.shiguangkey.com/api/afterSales/complaintRefund/applyManager/saveSallerApproveResult
    method: POST
    header:
      token: $<leader>
      content-type: application/json
    data:
      {
        "complaintReasonTypeKeys": [0],
        "approveResultType": 3,
        "approveOpinion": "同意退款",
        "complaintReasonList": [
        {
          "complaintReasonType":15,
          "complaintReasonSubdivide":1501,
          "complaintReasonLable":2
        }
        ],
        "tabIndex": "1",
        "complaintTaskId": "$<complaintTaskId>",
        "flowMainId": "$<flowMainId>"
      }
    shared:
    check:
      status: 0
      msg: success

qry_risk_approve_list:

  - caseid: 1057
    run: YES
    desc: 【教务/投诉退款/审核】查询待风控审核单
    precondition:
    parameterize:
      account: account
    url: https://open-test.shiguangkey.com/api/afterSales/complaintRefund/applyManager/qryRiskApproveList
    method: POST
    header:
      token: $<leader>
      content-type: application/json
    data:
      pageIndex: 1
      pageSize: 10
      tabIndex: 2
      userInfoType: 2
      userInfoContent: $<account>
      dealTaskUserIdType: 1
      dealTaskUserId:
      queryDealTimeType: 1
      dealCountType:
      approveUntreatedUserIdType: 1
      approveUntreatedUserId:
      complaintReasonType:
      complaintReasonSubdivide:
    shared:
    check:
      status: 0
      msg: success

query_dealing_complaint:

  - caseid: 1058
    run: YES
    desc: 【教务/投诉退款/审核】查询待风控审核单详情
    precondition:
    parameterize:
      studentUid: studentUid
      flowMainId: flowMainId
      complaintTaskId: complaintTaskId
    url: https://open-test.shiguangkey.com/api/afterSales/complaintRefund/inDeal/qryDealingComplaint
    method: GET
    header:
      token: $<leader>
    data:
      complaintTaskId: $<complaintTaskId>
      studentUid: $<studentUid>
      flowMainId: $<flowMainId>
      tabIndex: 2
    shared:
    check:
      status: 0
      msg: success

save_risk_approve_result:

  - caseid: 1059
    run: YES
    desc: 【教务/投诉退款/审核】处理待风控审核单
    precondition:
    parameterize:
      complaintTaskId: complaintTaskId
      flowMainId: flowMainId
    url: https://open-test.shiguangkey.com/api/afterSales/complaintRefund/applyManager/saveRiskApproveResult
    method: POST
    header:
      token: $<leader>
      content-type: application/json
    data:
      {
        "complaintReasonTypeKeys": [0],
        "approveResultType": "3",
        "accrualPrersale": "0",
        "accrualAftersale": "100",
        "approveOpinion": "风控审核同意同意退款",
        "complaintReasonList": [{"complaintReasonType": "14","complaintReasonSubdivide": "1401","complaintAccrualType": "1","complaintReasonLable": "2"}],
        "tabIndex": "2",
        "complaintTaskId": "$<complaintTaskId>",  # 关联点
        "flowMainId": "$<flowMainId>"
      }
    shared:
    check:
      status: 0
      msg: success

query_pending_refund:

  - caseid: 1060
    run: YES
    desc: 【教务/投诉退款/退款】查询待退款单
    precondition:
    parameterize:
      account: account
    url: https://open-test.shiguangkey.com/api/afterSales/complaintRefund/refund/qryPendingRefund
    method: POST
    header:
      token: $<leader>
      content-type: application/json
    data:
      {
        "pageIndex":1,
        "pageSize":10,
        "queryDealingStatus":"1",
        "queryDealTimeType":"1",
        "userType":"1",
        "approveUserIdType":"1",
        "userInfoType":"2",
        "userInfoContent":"$<account>"
      }
    shared:
    check:
      status: 0
      msg: success

get_order_list:

  - caseid: 1061
    run: YES
    desc: 【教务/投诉退款/退款】点击申请退款后获取订单详细
    precondition:
    parameterize:
      orderNo: orderNo
    url: https://work-test.shiguangkey.com/api/worksheet/order/getOrderList
    method: POST
    header:
      token: $<leader>
      content-type: application/x-www-form-urlencoded
    data:
      orderNo: $<orderNo>
    shared:
    check:
      status: 0
      msg: success

get_Worksheet:

  - caseid: 1062
    run: YES
    desc: 【教务/投诉退款/退款】点击申请退款后获取工单详细
    precondition:
    parameterize:
      orderId: orderId
    url: https://work-test.shiguangkey.com/api/worksheet/order/getWorksheet
    method: POST
    header:
      token: $<leader>
      content-type: application/x-www-form-urlencoded
    data:
      orderId: $<orderId>
    shared:
    check:
      status: 0
      msg: success

add_refund_apply:

  - caseid: 1063
    run: YES
    desc: 【教务/投诉退款/退款列表】申请退款
    precondition:
    parameterize:
      discountsPrice: discountsPrice
      departmentIdChain: departmentIdChain
      worksheetNo: worksheetNo
      worksheetId: worksheetId
      orderId: orderId
      courseId: courseId
    url: https://work-test.shiguangkey.com/api/worksheet/refund/apply/add
    method: POST
    header:
      token: $<leader>
      content-type: application/x-www-form-urlencoded
    data:
      {
        "isUnifiedChannel":2,
        "refundList":'[{"worksheetNo":"$<worksheetNo>","vouchers":"https://res.shiguangkey.com/file/worksheet/payProof/20200408/15/20200408153408271523387.jpg","refundChannelList":[{"refundChannelValue":"1","refundChannelSubValue":"1","amount":$<discountsPrice>}]}]',
        "remark":"随机退款备注",
        "refundReasonValue":14,
        "refundDetailValue":1401,
        "refundProtocol":"https://res.shiguangkey.com/file/worksheet/refundProof/20200528/14/20200528143546541463771.jpg",
        "isSuspend":0,
        "lecturerAreaValue":"1001-5",
        "refundCourseList":'[{"amount":$<discountsPrice>,"courseId":$<courseId>,"studyState":1}]',
        "refundDivideDeptList":'[{"divideAmount":$<discountsPrice>,"loanSubsidizedAmount":0,"worksheetId":"$<worksheetId>","deptIdChain":"$<departmentIdChain>"}]',
        "amount":$<discountsPrice>,
        "interest":0,
        "submit":1,
        "orderId": "$<orderId>"
      }
    shared:
    check:
      status: 0
      msg: success

query_refund_apply:

  - caseid: 1064
    run: YES
    desc: 【CRM/工单管理/退款申请列表】查询退款单号
    precondition:
    parameterize:
      transNo: transNo
    url: https://work-test.shiguangkey.com/api/worksheet/refund/apply/pageList
    method: POST
    header:
      token: $<partner>
      content-type: application/x-www-form-urlencoded
    data:
      transNo: $<transNo>
      pageIndex: 1
      pageSize: 20
    shared:
      refundId: id
      refundNo: refundNo
    check:
      status: 0
      msg: success

query_addVouchers:

  - caseid: 1065
    run: YES
    desc: 【CRM/财务管理/退款审核列表】查询待财务审核订单
    precondition:
    parameterize:
      refundNo: refundNo
    url: https://work-test.shiguangkey.com/api/worksheet/refund/apply/finance/pageList
    method: POST
    header:
      token: $<partner>
      content-type: application/x-www-form-urlencoded
    data:
      refundNo: $<refundNo>
      pageIndex: 1
      pageSize: 20
      state: 91
    shared:
    check:
      status: 0
      msg: success

get_refund_details:

  - caseid: 1066
    run: YES
    desc: 【CRM/财务管理/退款审核列表】获取该订单退款详细信息
    precondition:
    parameterize:
      refundId: refundId
    url: https://work-test.shiguangkey.com/api/worksheet/refund/apply/getDetails
    method: POST
    header:
      token: $<partner>
      content-type: application/x-www-form-urlencoded
    data:
      id: $<refundId>
    shared:
    check:
      status: 0
      msg: success

check_finance:

  - caseid: 1067
    run: YES
    desc: 【CRM/财务管理/退款审核列表】审核该退款单
    precondition:
    parameterize:
      refundId: refundId
    url: https://work-test.shiguangkey.com/api/worksheet/refund/apply/finance/check
    method: POST
    header:
      token: $<partner>
      content-type: application/x-www-form-urlencoded
    data:
      auditState: 1
      refundId: $<refundId>
    shared:
    check:
      status: 0
      msg: success

query_cashier_addVouchers:

  - caseid: 1068
    run: YES
    desc: 【CRM/财务管理/退款出纳列表】查询待出纳打款订单
    precondition:
    parameterize:
      transNo: transNo
    url: https://work-test.shiguangkey.com/api/worksheet/refund/cashier/pageList
    method: GET
    header:
      token: $<partner>
    data:
      paymentState: 1
      transNo: $<transNo>
      cashieType: 99
      pageIndex: 1
      pageSize: 20
      tabType: 3
    shared:
      addVouchersId: id-1
    check:
      status: 0
      msg: success

cashier_addVouchers:

  - caseid: 1069
    run: YES
    desc: 【CRM/财务管理/退款出纳列表】审核出纳退款单
    precondition:
    parameterize:
      transNo: transNo
      addVouchersId: addVouchersId
      timestamp: timestamp
    url: https://work-test.shiguangkey.com/api/worksheet/refund/cashier/addVouchers
    method: POST
    header:
      token: $<partner>
      content-type: application/x-www-form-urlencoded
    data:
      vouchers: https://res.shiguangkey.com/file/worksheet/payProof/20200409/15/20200409151328697651498.jpg
      transNo: $<transNo>
      id: $<addVouchersId>
      operateTime: $<timestamp>
    shared:
    check:
      status: 0
      msg: success